# 生命周期
[[toc]]

## 定义

生命周期函数是一种**事件驱动设计模式**，它通过预定义的函数接口，让系统在特定的时间点自动调用相应的代码。

**事件驱动设计模式**是一种基于事件触发和响应的编程模型，它将程序的行为与系统或用户的事件紧密结合，常用于构建动态、交互性强的应用程序。
其核心是事件的触发和监听。

## 官方流程示意图

![生命周期示意图](/Unity/LifeRecycle.png)

## 主要回调的应用

### Awake

* 特性：
  * 在脚本实例被创建后立即调用，无论游戏对象的初始状态是激活还是未激活，Awake方法都会被触发；
  * 在一个生命周期里只会调用一次且仅调用一次；
* 常见应用场景：
  * 初始化变量；
  * 查找获取组件的引用；

### OnEnable

* 特性：
  * 当脚本被激活或对象变为可用状态时调用。
* 常见应用场景：
    * 初始化操作如：订阅事件、 注册监听器；

### Start

* 特性：
  * 仅在Update函数第一次调用前调用。
  * 在一个生命周期里只会调用一次且仅调用一次；
* 常见应用场景：
    * 执行初始化和准备工作，如加载资源、设置初始状态；

### FixedUpdate

* 特性：
  * 每隔固定时间段执行一次，与帧率无关。
  * 固定时间执行的效果能尽可能避免不同设备性能导致的物理表现差异；
* 常见应用场景：
    * 处理物理相关的逻辑，比如物体移动和碰撞；

### Update

* 特性：
  * 每帧调用一次，频率依赖于帧率。
  * 根据刷新帧率执行的效果能与用户输入表现一致；
* 常见应用场景：
    * 处理对象的逻辑和行为，比如移动、攻击；
    * 执行计时器；
    * 更新UI元素；

### LateUpdate

* 特性：
  * 在所有Update函数调用后调用。
* 常见应用场景：
    * 摄像机跟随角色；

### OnDisable

* 特性：
  * 当脚本对象被禁用或不可用时。
* 常见应用场景：
    * 清理操作，如取消事件订阅、解除监听器等；
    * 停止协程；

### OnDestroy

* 特性：
  * 当脚本对象即将被销毁时。
* 常见应用场景：
    * 释放资源、清理数据；
    * 清除订阅事件以及回调，避免潜在错误或者内存泄漏；

## 架构意义

### 为什么很多架构底层都设计了这个模块？有什么好处？

- 明确结构，提升可读性：不同功能对应特定函数（如初始化用 Awake，帧更新用 Update），逻辑清晰易维护。
- 统一调用顺序，避免依赖冲突：按固定规则执行生命周期函数，确保脚本间依赖关系正确处理。
- 支持模块化与复用：每个脚本独立实现所需逻辑，可移植性强，减少耦合。
- 便于调试与优化：统一的调用模式和规则，让问题定位和性能调优更加高效。
- 适配多场景需求：针对不同功能（如物理、渲染）提供特定函数，满足多样化开发需求。
- 团队协作一致性：统一开发规范，简化多人协作中的代码风格管理。
- 降低开发难度：新手易上手，复杂逻辑由引擎管理，开发者专注于功能实现。

这套设计适合游戏开发的高复杂度、多模块化需求，使得开发者能够更加专注于核心逻辑而非底层管理，其兼具灵活性和规范性，是复杂游戏开发中的高效解决方案。
